<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AR Projesi</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- AR.js -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: monospace;
    }

    /* LOG PANEL */
    #logPanel {
      position: fixed;
      right: 10px;
      bottom: 60px;
      width: 260px;
      max-height: 50vh;
      background: rgba(0, 0, 0, 0.75);
      color: #00ffcc;
      padding: 10px;
      font-size: 12px;
      overflow-y: auto;
      display: none;
      z-index: 9999;
      border-radius: 8px;
    }

    #logPanel h3 {
      margin: 0 0 6px 0;
      color: white;
      font-size: 14px;
    }

    #logBtn {
      position: fixed;
      right: 10px;
      bottom: 10px;
      padding: 10px 14px;
      background: rgba(0, 0, 0, 0.85);
      color: #00ffcc;
      border: 1px solid #00ffcc;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      z-index: 10000;
    }
  </style>
</head>

<body>

  <!-- LOG -->
  <div id="logPanel">
    <h3>LOG</h3>
    <div id="logContent"></div>
  </div>
  <button id="logBtn">LOG</button>

  <!-- AR SCENE -->
  <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
    
    <!-- QR MARKER -->
    <a-marker
      type="pattern"
      url="qr/pattern-ar_projesi.patt"
      id="qrMarker">

      <!-- KARA DELİK (merkez) -->
      <a-sphere
        radius="0.35"
        color="#000000"
        position="0 0.5 0"
        animation="property: scale; from: 1 1 1; to: 0.9 0.9 0.9; dir: alternate; loop: true; dur: 800">
      </a-sphere>

      <!-- IŞINLAR -->
      <a-entity position="0 0.5 0">

        <a-cylinder radius="0.02" height="2"
          color="#00ccff"
          position="0 1 0"
          animation="property: position; from: 0 0.5 0; to: 0 3 0; loop: true; dur: 1200">
        </a-cylinder>

        <a-cylinder radius="0.02" height="2"
          color="#ff00ff"
          rotation="0 0 45"
          animation="property: position; from: 0 0.5 0; to: 1.5 2.5 0; loop: true; dur: 1400">
        </a-cylinder>

        <a-cylinder radius="0.02" height="2"
          color="#ffff00"
          rotation="0 0 -45"
          animation="property: position; from: 0 0.5 0; to: -1.5 2.5 0; loop: true; dur: 1600">
        </a-cylinder>

      </a-entity>

    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <!-- SCRIPT -->
  <script>
    const logPanel = document.getElementById("logPanel");
    const logContent = document.getElementById("logContent");
    const logBtn = document.getElementById("logBtn");
    const marker = document.getElementById("qrMarker");

    function logYaz(metin) {
      const zaman = new Date().toLocaleTimeString();
      logContent.innerHTML += `[${zaman}] ${metin}<br>`;
      logContent.scrollTop = logContent.scrollHeight;
    }

    logBtn.onclick = () => {
      logPanel.style.display =
        logPanel.style.display === "none" ? "block" : "none";
    };

    logYaz("AR Projesi v1.3");
    logYaz("Kara delik sahnesi yüklendi");

    marker.addEventListener("markerFound", () => {
      logYaz("QR algılandı → Kara delik aktif");
    });

    marker.addEventListener("markerLost", () => {
      logYaz("QR kayboldu → Kara delik pasif");
    });
  </script>

</body>
</html>
